<template>
    <section
        class="from-bg via-surface-2/40 to-bg text-text min-h-screen w-full bg-gradient-to-b"
    >
        <main
            class="mx-auto flex min-h-screen w-full max-w-7xl flex-col gap-4 px-3 pt-[calc(env(safe-area-inset-top)+1.25rem)] pb-[calc(env(safe-area-inset-bottom)+1.5rem)] sm:gap-5 sm:px-5 lg:px-8"
            data-page="search"
        >
            <section
                class="border-border/60 bg-surface-1/85 flex flex-col gap-3 rounded-3xl border p-3 shadow-sm sm:p-4"
            >
                <form class="flex flex-col gap-3" data-search-form>
                    <div class="grid grid-cols-[minmax(0,1fr)_auto] gap-2">
                        <input
                            type="search"
                            name="q"
                            inputmode="search"
                            autocomplete="off"
                            placeholder="לדוגמה: 234114 או מבוא למדעי המחשב"
                            class="border-border/70 bg-surface-2/80 text-text placeholder:text-text-muted focus-visible:ring-accent/60 min-h-10 w-full min-w-0 rounded-2xl border px-3 text-[11px] transition duration-200 ease-out focus-visible:ring-2 sm:text-xs"
                            data-search-input
                        />
                        <button
                            type="submit"
                            class="bg-accent text-accent-contrast min-h-10 min-w-10 rounded-2xl px-3 shadow-sm"
                            data-search-submit
                            aria-label="חיפוש"
                            title="חיפוש"
                        >
                            <svg
                                viewBox="0 0 24 24"
                                aria-hidden="true"
                                class="h-4 w-4"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <circle cx="11" cy="11" r="7"></circle>
                                <line
                                    x1="21"
                                    y1="21"
                                    x2="16.65"
                                    y2="16.65"
                                ></line>
                            </svg>
                        </button>
                    </div>

                    <div class="grid grid-cols-2 gap-2 lg:grid-cols-3">
                        <div class="flex w-full min-w-0 flex-col gap-1">
                            <span class="text-text-muted text-[11px] sm:text-xs"
                                >זמינות</span
                            >
                            <label
                                class="border-border/60 bg-surface-2/50 flex min-h-10 w-full min-w-0 items-center gap-2 rounded-xl border px-3"
                            >
                                <input
                                    type="checkbox"
                                    class="accent-accent h-4 w-4"
                                    data-filter-available
                                />
                                <span class="text-text text-[11px] sm:text-xs"
                                    >זמין</span
                                >
                            </label>
                        </div>

                        <label class="flex w-full min-w-0 flex-col gap-1">
                            <span class="text-text-muted text-[11px] sm:text-xs"
                                >פקולטה</span
                            >
                            <select
                                class="border-border/70 bg-surface-2/80 text-text focus-visible:ring-accent/60 min-h-10 w-full min-w-0 rounded-xl border px-3 text-[11px] focus-visible:ring-2 sm:text-xs"
                                data-filter-faculty
                            >
                                <option value="">כל הפקולטות</option>
                            </select>
                        </label>

                        <label class="flex w-full min-w-0 flex-col gap-1">
                            <span class="text-text-muted text-[11px] sm:text-xs"
                                >דרישה</span
                            >
                            <select
                                class="border-border/70 bg-surface-2/80 text-text focus-visible:ring-accent/60 min-h-10 w-full min-w-0 rounded-xl border px-3 text-[11px] focus-visible:ring-2 sm:text-xs"
                                data-filter-requirement
                            >
                                <option value="">כל הדרישות</option>
                            </select>
                        </label>

                        <label class="flex w-full min-w-0 flex-col gap-1">
                            <span class="text-text-muted text-[11px] sm:text-xs"
                                >חציון מינימום</span
                            >
                            <input
                                type="number"
                                inputmode="decimal"
                                min="0"
                                max="100"
                                class="border-border/70 bg-surface-2/80 text-text placeholder:text-text-muted focus-visible:ring-accent/60 min-h-10 w-full min-w-0 rounded-xl border px-3 text-[11px] focus-visible:ring-2 sm:text-xs"
                                placeholder="ללא"
                                data-filter-median-min
                            />
                        </label>

                        <label class="flex w-full min-w-0 flex-col gap-1">
                            <span class="text-text-muted text-[11px] sm:text-xs"
                                >נק״ז מינימום</span
                            >
                            <input
                                type="number"
                                inputmode="decimal"
                                step="0.5"
                                min="0"
                                class="border-border/70 bg-surface-2/80 text-text placeholder:text-text-muted focus-visible:ring-accent/60 min-h-10 w-full min-w-0 rounded-xl border px-3 text-[11px] focus-visible:ring-2 sm:text-xs"
                                placeholder="ללא"
                                data-filter-points-min
                            />
                        </label>

                        <label class="flex w-full min-w-0 flex-col gap-1">
                            <span class="text-text-muted text-[11px] sm:text-xs"
                                >נק״ז מקסימום</span
                            >
                            <input
                                type="number"
                                inputmode="decimal"
                                step="0.5"
                                min="0"
                                class="border-border/70 bg-surface-2/80 text-text placeholder:text-text-muted focus-visible:ring-accent/60 min-h-10 w-full min-w-0 rounded-xl border px-3 text-[11px] focus-visible:ring-2 sm:text-xs"
                                placeholder="ללא"
                                data-filter-points-max
                            />
                        </label>
                    </div>
                </form>
            </section>

            <section class="flex flex-col gap-2" aria-live="polite">
                <div class="flex flex-wrap items-center justify-between gap-2">
                    <p
                        class="text-text-muted text-[11px] sm:text-xs"
                        data-search-status
                    >
                        טוען נתונים...
                    </p>
                </div>
                <p
                    class="text-text-muted text-[11px] sm:text-xs"
                    data-search-sync
                ></p>

                <p
                    class="border-border/60 bg-surface-1/70 text-text-muted rounded-2xl border p-3 text-[11px] sm:text-xs"
                    data-search-empty
                >
                    אין כרגע תוצאות להצגה.
                </p>

                <div
                    class="grid grid-cols-3 gap-2 sm:grid-cols-4 sm:gap-3 lg:grid-cols-5"
                    data-search-results
                ></div>
            </section>
        </main>
    </section>
</template>
